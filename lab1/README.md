# Лабораторная работа 1

**Название:** "Разработка драйверов символьных устройств"

**Цель работы:** получить знания и навыки разработки драйверов символьных
устройств для операционной системы Linux.

## Описание функциональности драйвера

При записи в файл символьного устройства текста типа “5+6”
должен запоминаться результат операции, то есть 11 для
данного примера. Должны поддерживаться операции сложения,
вычитания, умножения и деления. Последовательность
полученных результатов с момента загрузки модуля ядра
должна выводиться при чтении созданного файла /proc/varN в
консоль пользователя.
При чтении из файла символьного устройства в кольцевой
буфер ядра должен осуществляться вывод тех же данных,
которые выводятся при чтении файла /proc/varN.

## Инструкция по сборке

```
    $ make
```

## Инструкция пользователя

### Загрузка модуля
1. Собрать модуль
2. Загрузить модуль с помощью
   ```
    # insmod lab1.ko
   ```

### Использование
1. С помощью `echo` записать выражения вида "1+2" в `/dev/var2`
2. Прочитать полученные результаты из файла `/proc/var2` или вывести их в буфер ядра с помощью чтения `/dev/var2`

### Выгрузка модуля
1. ```
    # rmmod lab1
   ```

## Примеры использования

```
anton@anton-VirtualBox:~/io/lab1$ sudo insmod lab1.ko
anton@anton-VirtualBox:~/io/lab1$ sudo chmod 777 /dev/var2
anton@anton-VirtualBox:~/io/lab1$ echo "30*400" > /dev/var2
anton@anton-VirtualBox:~/io/lab1$ echo "0+0" > /dev/var2
anton@anton-VirtualBox:~/io/lab1$ echo "1+4" > /dev/var2
anton@anton-VirtualBox:~/io/lab1$ cat /proc/var2
12000
0
5
anton@anton-VirtualBox:~/io/lab1$ echo "1" > /dev/var2
anton@anton-VirtualBox:~/io/lab1$ cat /proc/var2
12000
0
5
Error
anton@anton-VirtualBox:~/io/lab1$ cat /dev/var2
anton@anton-VirtualBox:~/io/lab1$ dmesg | tail -7
[ 2041.287040] INIT MODULE
[ 2041.294195] Device created on /dev/var2
[ 2417.433986] Lab1: 12000
               0
               5
               Error

```